# システムテスト仕様書

**プロジェクト名**: 商品在庫管理システム  
**バージョン**: 1.0  
**作成日**: 2026年2月22日  
**対象**: Spring Boot 4.0.3 + MySQL 8.0 + Thymeleaf

---

## 目次
- [1. テスト概要](#1-テスト概要)
- [2. テスト環境](#2-テスト環境)
- [3. テストケース一覧](#3-テストケース一覧)
- [4. 一般ユーザーシナリオ](#4-一般ユーザーシナリオ)
- [5. 管理ユーザーシナリオ](#5-管理ユーザーシナリオ)
- [6. エラーハンドリングシナリオ](#6-エラーハンドリングシナリオ)

---

## 1. テスト概要

### 1.1 目的
商品在庫管理システムの主要な業務フロー（ユーザー認証、在庫管理、商品管理、ユーザー管理）が正常に動作することを確認する。

### 1.2 対象機能
| ユーザータイプ | 対象機能 |
|--------|---------|
| **一般ユーザー** | ログイン、在庫管理、在庫詳細表示、パスワード変更、ログアウト、エラー処理 |
| **管理ユーザー** | ログイン、在庫管理、在庫詳細表示、商品管理、商品新規登録、ユーザー一覧、ユーザー新規作成、ログアウト、エラー処理 |

### 1.3 スコープ
- **含む**: UI操作、データベースの状態変化、リダイレクト、エラーメッセージ表示
- **含まない**: パフォーマンステスト、セキュリティテスト（脆弱性診断）、ローカライゼーション

---

## 2. テスト環境

| 項目 | 内容 |
|------|------|
| OS | Windows 11 |
| ブラウザ | Google Chrome（最新版） |
| JDK | Amazon Corretto 21 |
| ビルドツール | Maven |
| アプリケーションサーバー | Spring Boot 4.0.3 |
| データベース | MySQL 8.0 |
| テストユーザー | testuser（一般）, adminuser（管理者） |

### 2.1 テスト前の準備
```bash
# アプリケーション起動
mvn clean install
mvn spring-boot:run -Dspring-boot.run.arguments="--spring.profiles.active=dev"
```

### 2.2 テスト用ユーザー
- **一般ユーザー**
  - Username: `testuser`
  - Password: `TestPass123!`
  - Role: `ROLE_USER`

- **管理ユーザー**
  - Username: `adminuser`
  - Password: `AdminPass123!`
  - Role: `ROLE_ADMIN`

---

## 3. テストケース一覧

### 3.1 一般ユーザーシナリオ

| テストID | シナリオ名 | 説明 |
|---------|---------|------|
| UST-001 | ユーザーログイン成功 | 正常な認証情報でログインし、在庫管理画面に遷移する |
| UST-002 | ユーザーログイン失敗-パスワード誤り | 誤ったパスワードでログイン失敗し、エラーメッセージが表示される |
| UST-003 | ユーザーログイン失敗-ユーザー存在しない | 存在しないユーザーでログイン失敗し、エラーメッセージが表示される |
| UST-004 | 在庫管理画面表示 | 一般ユーザー用在庫管理画面が正常に表示される |
| UST-005 | 在庫検索・フィルタリング | キーワード・カテゴリ・在庫状態・在庫数条件・ソート・クリアでフィルタリングが機能する |
| UST-006 | 在庫詳細表示 | 商品詳細画面から基本情報・詳細情報・入出庫履歴が表示される |
| UST-007 | 在庫入出庫操作 | モーダルから入庫・出庫操作ができ、在庫が更新される |
| UST-008 | パスワード変更成功 | 現在のパスワードを確認した上で新しいパスワードに変更される |
| UST-009 | パスワード変更失敗-現在のパスワード誤り | 現在のパスワード確認エラーで変更が中止される |
| UST-010 | パスワード変更失敗-バリデーション | 新しいパスワードのバリデーション違反でエラーが表示される |
| UST-011 | ユーザーログアウト | ログアウト後、ログイン画面に遷移し、セッションが削除される |
| UST-012 | アクセス拒否-エラー403 | 非認証ユーザーが保護されたページへアクセスするとログイン画面に遷移 |
| UST-013 | ページ不在-エラー404 | 存在しないページへアクセスするとエラー画面が表示される |
| UST-014 | ユーザーログイン不可-無効ユーザ | 無効(disabled)に設定したユーザはログインできずエラーとなる |
| UST-015 | ユーザ再有効化-ログイン成功 | 無効から有効に戻したユーザはログインし在庫管理画面に遷移する |

### 3.2 管理ユーザーシナリオ

| テストID | シナリオ名 | 説明 |
|---------|---------|------|
| AST-001 | 管理者ログイン成功 | 正常な認証情報でログインし、管理者メニューに遷移する |
| AST-002 | 管理者ログイン失敗 | 誤った認証情報でログイン失敗し、エラーメッセージが表示される |
| AST-003 | 一般ユーザーで管理者ログイン試行 | 一般ユーザー認証情報での管理者ログイン試行は失敗 |
| AST-004 | 管理者在庫管理画面表示 | 管理者用在庫管理画面が正常に表示される |
| AST-005 | 在庫編集機能 | 在庫編集モーダルで在庫数を更新でき、DB変更と履歴記録が行われる |
| AST-006 | 在庫直接設定機能 | 「在庫数設定」で指定値に直接変更される |
| AST-007 | 商品管理画面表示 | 商品一覧が正常に表示される |
| AST-008 | 商品新規登録 | 基本情報・詳細情報を入力して新規商品を登録できる |
| AST-009 | 商品新規登録-バリデーション | 必須項目未入力時にバリデーションエラーが表示される |
| AST-010 | 商品編集 | 既存商品の情報を編集でき、DB変更が反映される |
| AST-011 | 商品削除 | 商品を論理削除でき、削除済み商品を含めるフィルタで表示可能 |
| AST-012 | 商品復元 | 削除済み商品を復元できる |
| AST-013 | ユーザー一覧表示 | ユーザー一覧が正常に表示される |
| AST-014 | ユーザー新規作成 | 新規ユーザーを登録でき、DBに保存される |
| AST-015 | ユーザー新規作成-バリデーション | ユーザー名重複時などのバリデーションエラーが表示される |
| AST-016 | ユーザー編集 | ユーザー情報を編集できる |
| AST-017 | 管理者ログアウト | ログアウト後、ログイン画面に遷移する |
| AST-018 | 一般ユーザーの管理画面アクセス拒否 | 一般ユーザーが /admin/* へアクセスするとアクセス拒否される |
| AST-019 | 管理者コンテキスト: 無効ユーザログイン不可 | 管理画面操作で無効にしたユーザはログインできないことを確認 |
| AST-020 | 管理者コンテキスト: 無効→有効でログイン成功 | 無効から有効にしたユーザが管理側でログインできることを確認 |
| AST-021 | 履歴モーダル表示確認 | 在庫一覧の「履歴」ボタンで履歴モーダルが表示されることを確認 |
| AST-022 | 商品編集: ステータス変更で一覧非表示確認 | 商品編集でステータスを非表示に変更した際、一覧に表示されないことを確認 |
| AST-023 | 在庫管理: 復元ボタン挙動確認(チェック無し) | 削除チェック無しの通常一覧から復元ボタン押下で期待動作を確認 |
| AST-024 | 商品管理: 検索クリア確認 | 商品管理画面で検索条件をクリアして初期化されることを確認 |
| AST-025 | ページ遷移確認(商品/在庫) | 商品管理画面・在庫管理画面間のページ遷移が正しく動作することを確認 |
| AST-026 | ユーザー一覧: キーワード/ステータス/ロール/並び順検索 | ユーザー一覧でキーワード・ステータス・ロール・並び順が機能することを確認 |
| AST-027 | ユーザー管理: 検索クリア・削除/無効/編集での再有効化確認 | ユーザー削除（無効化）と編集画面での有効化・一覧表示を確認 |

### 3.3 エラーハンドリングシナリオ

| テストID | シナリオ名 | 説明 |
|---------|---------|------|
| EST-001 | エラー画面-管理者ユーザー | エラー画面から管理者ログイン画面へリダイレクト |
| EST-002 | エラー画面-一般ユーザー | エラー画面からユーザーログイン画面へリダイレクト |
| EST-003 | エラー画面-レイアウト | エラー画面が正常なHTMLレイアウトで表示される |

---

## 4. 一般ユーザーシナリオ

### UST-001: ユーザーログイン成功

| 項目 | 内容 |
|------|------|
| **テストID** | UST-001 |
| **シナリオ名** | ユーザーログイン成功 |
| **前提条件** | アプリケーション起動済み、ブラウザで http://localhost:8080/login にアクセス |
| **テスト手順** | 1. ユーザー名: `testuser`, パスワード: `TestPass123!` を入力<br>2. 「ログイン」ボタンをクリック |
| **確認項目** | 項目1: HTTP 302 リダイレクトが返される |
| | 項目2: `/inventory` へリダイレクトされる |
| | 項目3: ページに「在庫管理」というタイトルが表示される |
| | 項目4: ナビゲーションバーに「パスワード変更」「ログアウト」が表示される |
| | 項目5: DB側でログイン試行回数がリセットされている（ブルートフォース対策） |
| **期待される結果** | システムが一般ユーザーを認証し、在庫管理画面を表示する |
| **実行結果** | ☐ OK / ☐ NG |
| **備考** | セッションが作成され、24時間有効な Remember-Me クッキーが設定される |

### UST-002: ユーザーログイン失敗-パスワード誤り

| 項目 | 内容 |
|------|------|
| **テストID** | UST-002 |
| **シナリオ名** | ユーザーログイン失敗-パスワード誤り |
| **前提条件** | アプリケーション起動済み、ブラウザで http://localhost:8080/login にアクセス |
| **テスト手順** | 1. ユーザー名: `testuser`, パスワード: `WrongPassword` を入力<br>2. 「ログイン」ボタンをクリック |
| **確認項目** | 項目1: `/login?error` へリダイレクトされる |
| | 項目2: エラーメッセージ「ユーザー名またはパスワードが正しくありません」が表示される |
| | 項目3: DB側でログイン試行回数が+1されている |
| | 項目4: セッションが作成されない |
| **期待される結果** | ログイン画面にエラーメッセージが表示される |
| **実行結果** | ☐ OK / ☐ NG |
| **備考** | ブルートフォース対策により5回失敗で24時間ブロックされる |

### UST-003: ユーザーログイン失敗-ユーザー存在しない

| 項目 | 内容 |
|------|------|
| **テストID** | UST-003 |
| **シナリオ名** | ユーザーログイン失敗-ユーザー存在しない |
| **前提条件** | アプリケーション起動済み、ブラウザで http://localhost:8080/login にアクセス |
| **テスト手順** | 1. ユーザー名: `nonexistentuser`, パスワード: `Password123!` を入力<br>2. 「ログイン」ボタンをクリック |
| **確認項目** | 項目1: `/login?error` へリダイレクトされる |
| | 項目2: エラーメッセージが表示される |
| | 項目3: セッションが作成されない |
| **期待される結果** | ログイン画面にエラーメッセージが表示される |
| **実行結果** | ☐ OK / ☐ NG |

### UST-004: 在庫管理画面表示

| 項目 | 内容 |
|------|------|
| **テストID** | UST-004 |
| **シナリオ名** | 在庫管理画面表示 |
| **前提条件** | 一般ユーザー `testuser` でログイン済み |
| **テスト手順** | 1. `/inventory` にアクセス（またはナビゲーションバーの在庫管理をクリック） |
| **確認項目** | 項目1: HTTP 200で在庫管理画面が表示される |
| | 項目2: ページヘッダーに「在庫管理」と表示される |
| | 項目3: 在庫不足アラート（在庫切れ・在庫不足の件数）が表示される |
| | 項目4: 商品一覧テーブルが表示される |
| | 項目5: 検索・フィルタパネルが機能する |
| | 項目6: ページネーションが表示される |
| | 項目7: 商品数が正確に表示される |
| **期待される結果** | 一般ユーザー用在庫管理画面が正常に表示される |
| **実行結果** | ☐ OK / ☐ NG |


### UST-005: 在庫検索・フィルタリング

| 項目 | 内容 |
|------|------|
| **テストID** | UST-005 |
| **シナリオ名** | 在庫検索・フィルタリング |
| **前提条件** | 一般ユーザー `testuser` でログイン済み、在庫管理画面を表示 |
| **テスト手順** | **手順1: キーワード検索**<br>1. 検索欄に「Laptop」と入力<br>2. 「検索」ボタンをクリック<br><br>**手順2: カテゴリフィルタ**<br>1. カテゴリセレクトボックスで「Electronics」を選択<br>2. 「検索」ボタンをクリック<br><br>**手順3: 在庫状態フィルタ**<br>1. 在庫状態セレクトボックスで「在庫なし(0個)」を選択<br>2. 「検索」ボタンをクリック<br><br>**手順4: 在庫数条件テスト**<br>1. 在庫数入力欄で「>=1」を設定して検索し、在庫数が1以上の商品のみ表示されることを確認<br>2. 在庫数入力欄で「>=20」を設定して検索し、在庫数が20以上の商品のみ表示されることを確認<br><br>**手順5: ソート確認**<br>1. 在庫数列で昇順ソートを選択し、一覧が昇順になっていることを確認<br>2. 在庫数列で降順ソートを選択し、一覧が降順になっていることを確認<br><br>**手順6: クリア操作**<br>1. 各種フィルタを設定後、「クリア」ボタンをクリックして全フィルタが初期状態に戻ることを確認 |
| **確認項目** | 項目1: キーワード検索で対象商品だけが表示される |
| | 項目2: カテゴリフィルタで Electronics カテゴリの商品だけが表示される |
| | 項目3: 在庫状態フィルタで在庫0個の商品だけが表示される |
| | 項目4: 在庫数条件（>=1, >=20）で結果が正しく絞られる |
| | 項目5: ソート（昇順/降順）が正しく適用される |
| | 項目6: 複数条件の同時フィルタで結果が絞られる |
| | 項目7: 「クリア」ボタンで全フィルタが解除され初期状態に戻る |
| **期待される結果** | フィルタリング・在庫数条件・ソート・クリアが正常に機能し、条件に合う商品だけが表示される |
| **実行結果** | ☐ OK / ☐ NG |

### UST-006: 在庫詳細表示

| 項目 | 内容 |
|------|------|
| **テストID** | UST-006 |
| **シナリオ名** | 在庫詳細表示 |
| **前提条件** | 一般ユーザー `testuser` でログイン済み、在庫管理画面を表示 |
| **テスト手順** | 1. 在庫管理画面からいずれかの商品の「詳細」ボタンをクリック（または商品行をクリック） |
| **確認項目** | 項目1: `/inventory/products/{id}` にアクセスされる |
| | 項目2: ページヘッダーに商品名が表示される |
| | 項目3: 基本情報カード（商品コード、商品名、カテゴリ、SKU、価格、在庫数、ステータス）が表示される |
| | 項目4: 在庫数に応じた色分け（0個=赤、1-20個=黄、21個以上=緑）が適用されている |
| | 項目5: 詳細情報カード（保証期間、寸法、製造日等）が表示される |
| | 項目6: 商品評価（星表示）が正確に表示される |
| | 項目7: 入出庫履歴カード（直近10件）が表示される |
| | 項目8: 「商品管理に戻る」ボタンで在庫管理画面に戻る |
| **期待される結果** | 商品詳細画面が正常に表示され、全情報が確認できる |
| **実行結果** | ☐ OK / ☐ NG |

### UST-007: 在庫入出庫操作

| 項目 | 内容 |
|------|------|
| **テストID** | UST-007 |
| **シナリオ名** | 在庫入出庫操作 |
| **前提条件** | 一般ユーザー `testuser` でログイン済み、在庫管理画面を表示 |
| **テスト手順** | 1. 在庫管理画面から在庫数が0でない商品を選択<br>2. 在庫数をクリックして入出庫モーダルを開く<br>3. **パターン1: 入庫**: ラジオボタン「入庫」を選択、「10」を入力、更新ボタンをクリック<br>4. **パターン2: 出庫**: ラジオボタン「出庫」を選択、「5」を入力、更新ボタンをクリック |
| **確認項目** | 項目1: モーダルが正常に開く |
| | 項目2: 入庫・出庫ラジオボタンが切り替わる |
| | 項目3: 入庫操作後、DBの在庫数が 現在値 + 10 になっている |
| | 項目4: 出庫操作後、DBの在庫数が 現在値 - 5 になっている |
| | 項目5: 在庫管理画面に戻った時、更新された在庫数が表示される |
| | 項目6: StockTransaction テーブルに履歴レコードが作成される |
| | 項目7: 成功メッセージ（例：「在庫が更新されました」）が表示される |
| **期待される結果** | 入出庫操作が正常に機能し、DB在庫と履歴が更新される |
| **実行結果** | ☐ OK / ☐ NG |

### UST-008: パスワード変更成功

| 項目 | 内容 |
|------|------|
| **テストID** | UST-008 |
| **シナリオ名** | パスワード変更成功 |
| **前提条件** | 一般ユーザー `testuser` でログイン済み、現在のパスワード: `TestPass123!` |
| **テスト手順** | 1. ナビゲーションバーの「パスワード変更」をクリック<br>2. 現在のパスワード: `TestPass123!` を入力<br>3. 新しいパスワード: `NewPass456!` を入力<br>4. 新しいパスワード（確認）: `NewPass456!` を入力<br>5. 「変更」ボタンをクリック |
| **確認項目** | 項目1: `/users/password` ページが表示される |
| | 項目2: 変更成功メッセージ「パスワードが変更されました」が表示される |
| | 項目3: `/inventory` にリダイレクトされる |
| | 項目4: DB側でユーザーのパスワードハッシュが更新されている |
| | 項目5: 新しいパスワード `NewPass456!` で再度ログインできる |
| | 項目6: 古いパスワード `TestPass123!` ではログインできない |
| **期待される結果** | パスワードが正常に変更され、DBに保存される |
| **実行結果** | ☐ OK / ☐ NG |
| **復旧手順** | パスワードを元の `TestPass123!` に戻す |

### UST-009: パスワード変更失敗-現在のパスワード誤り

| 項目 | 内容 |
|------|------|
| **テストID** | UST-009 |
| **シナリオ名** | パスワード変更失敗-現在のパスワード誤り |
| **前提条件** | 一般ユーザー `testuser` でログイン済み |
| **テスト手順** | 1. パスワード変更ページにアクセス<br>2. 現在のパスワード: `WrongPassword` を入力<br>3. 新しいパスワード: `NewPass456!` を入力<br>4. 「変更」ボタンをクリック |
| **確認項目** | 項目1: エラーメッセージ「現在のパスワードが正しくありません」が表示される |
| | 項目2: ページ上にフォームが残っている（入力内容は保持されず） |
| | 項目3: DBのパスワードが変更されていない |
| | 項目4: 古いパスワードでまだログインできる |
| **期待される結果** | パスワード変更が中止され、エラーメッセージが表示される |
| **実行結果** | ☐ OK / ☐ NG |

### UST-010: パスワード変更失敗-バリデーション

| 項目 | 内容 |
|------|------|
| **テストID** | UST-010 |
| **シナリオ名** | パスワード変更失敗-バリデーション |
| **前提条件** | 一般ユーザー `testuser` でログイン済み |
| **テスト手順** | **パターン1: パスワード短すぎる**<br>1. 現在のパスワード: `TestPass123!`, 新しいパスワード: `Short` を入力<br>2. 「変更」ボタンをクリック<br><br>**パターン2: パスワード不一致**<br>1. 新しいパスワード: `NewPass456!`, 確認: `NewPass789!` を入力<br>2. 「変更」ボタンをクリック |
| **確認項目** | 項目1: パターン1でエラーメッセージ「パスワードは8文字以上である必要があります」表示 |
| | 項目2: パターン2でエラーメッセージ「パスワードが一致しません」表示 |
| | 項目3: DBのパスワードが変更されていない |
| **期待される結果** | バリデーションエラーが表示され、パスワード変更が中止される |
| **実行結果** | ☐ OK / ☐ NG |

### UST-011: ユーザーログアウト

| 項目 | 内容 |
|------|------|
| **テストID** | UST-011 |
| **シナリオ名** | ユーザーログアウト |
| **前提条件** | 一般ユーザー `testuser` でログイン済み、在庫管理画面を表示 |
| **テスト手順** | 1. ナビゲーションバーの「ログアウト」ボタンをクリック |
| **確認項目** | 項目1: HTTP 302 リダイレクトが返される |
| | 項目2: `/login` にリダイレクトされる |
| | 項目3: セッションクッキーが削除されている |
| | 項目4: 新規ブラウザタブで `/inventory` にアクセスするとログイン画面にリダイレクトされる |
| | 項目5: ログアウト後、ユーザーの操作が記録されない（セッション終了） |
| **期待される結果** | ユーザーがシステムからログアウトし、ログイン画面に遷移する |
| **実行結果** | ☐ OK / ☐ NG |

### UST-012: アクセス拒否-エラー403

| 項目 | 内容 |
|------|------|
| **テストID** | UST-012 |
| **シナリオ名** | アクセス拒否-エラー403 |
| **前提条件** | ログアウト状態（セッションなし） |
| **テスト手順** | 1. ブラウザの URL バーで直接 `http://localhost:8080/inventory` を入力してアクセス |
| **確認項目** | 項目1: ログイン画面にリダイレクトされる |
| | 項目2: ユーザー認証なしで保護ページにアクセスできない |
| | 項目3: セッションがない場合、エラー403は返されない（代わりにログイン画面へリダイレクト） |
| **期待される結果** | 非認証ユーザーがログイン画面にリダイレクトされる |
| **実行結果** | ☐ OK / ☐ NG |

### UST-013: ページ不在-エラー404

| 項目 | 内容 |
|------|------|
| **テストID** | UST-013 |
| **シナリオ名** | ページ不在-エラー404 |
| **前提条件** | 一般ユーザー `testuser` でログイン済み |
| **テスト手順** | 1. ブラウザの URL バーで `http://localhost:8080/nonexistent-page` を入力してアクセス |
| **確認項目** | 項目1: HTTP 404 ステータスコードが返される |
| | 項目2: エラー画面が表示される |
| | 項目3: エラー画面に「ページが見つかりません」というメッセージが表示 |
| | 項目4: エラー画面に「在庫管理へ」ボタンがあり、一般ユーザーは `/login` へリダイレクト（エラー環境での確認） |
| | 項目5: エラー画面の基本レイアウトが正常 |
| **期待される結果** | 404エラー画面が正常に表示される |
| **実行結果** | ☐ OK / ☐ NG |

### UST-014: ユーザーログイン不可-無効ユーザ

| 項目 | 内容 |
|------|------|
| **テストID** | UST-014 |
| **シナリオ名** | ユーザーログイン不可-無効ユーザ |
| **前提条件** | アプリケーション起動済み、対象ユーザを管理画面または DB で `disabled` に設定済み |
| **テスト手順** | 1. ブラウザで `http://localhost:8080/login` にアクセス<br>2. 無効にしたユーザの認証情報を入力（例: `testuser-disabled`）<br>3. 「ログイン」ボタンをクリック |
| **確認項目** | 項目1: `/login?error` にリダイレクトされる |
| | 項目2: エラーメッセージ「アカウントが無効です」等が表示される |
| | 項目3: セッションが作成されない |
| **期待される結果** | 無効ユーザはログインできず、適切なエラーメッセージが表示される |
| **実行結果** | ☐ OK / ☐ NG |

### UST-015: ユーザ再有効化-ログイン成功

| 項目 | 内容 |
|------|------|
| **テストID** | UST-015 |
| **シナリオ名** | ユーザ再有効化-ログイン成功 |
| **前提条件** | 対象ユーザが一度 `disabled` に設定されており、管理者操作で `enabled` に戻せる状態 |
| **テスト手順** | 1. 管理者で管理画面にログインし、対象ユーザを有効化（enabled）に戻す<br>2. 一般ユーザとして `http://localhost:8080/login` にアクセスし、該当ユーザでログインを試行 |
| **確認項目** | 項目1: HTTP 302 リダイレクトが返される |
| | 項目2: `/inventory` にリダイレクトされる |
| | 項目3: 在庫管理画面が表示される |
| | 項目4: セッションが正常に作成される |
| **期待される結果** | 管理者による再有効化後、ユーザは正常にログインして在庫管理画面へ遷移する |
| **実行結果** | ☐ OK / ☐ NG |

---

## 5. 管理ユーザーシナリオ

### AST-001: 管理者ログイン成功

| 項目 | 内容 |
|------|------|
| **テストID** | AST-001 |
| **シナリオ名** | 管理者ログイン成功 |
| **前提条件** | アプリケーション起動済み、ブラウザで http://localhost:8080/admin/login にアクセス |
| **テスト手順** | 1. ユーザー名: `adminuser`, パスワード: `AdminPass123!` を入力<br>2. 「管理者ログイン」ボタンをクリック |
| **確認項目** | 項目1: HTTP 302 リダイレクトが返される |
| | 項目2: `/admin/inventory` へリダイレクトされる |
| | 項目3: ページに「在庫管理」というタイトルが表示される |
| | 項目4: ナビゲーションバーに管理者バッジが表示される |
| | 項目5: ナビゲーションバーに「在庫管理」「商品管理」「ユーザー管理」などの管理メニューが表示 |
| **期待される結果** | システムが管理者を認証し、管理者メニューを表示する |
| **実行結果** | ☐ OK / ☐ NG |

### AST-002: 管理者ログイン失敗

| 項目 | 内容 |
|------|------|
| **テストID** | AST-002 |
| **シナリオ名** | 管理者ログイン失敗 |
| **前提条件** | アプリケーション起動済み、ブラウザで http://localhost:8080/admin/login にアクセス |
| **テスト手順** | 1. ユーザー名: `adminuser`, パスワード: `WrongPassword` を入力<br>2. 「管理者ログイン」ボタンをクリック |
| **確認項目** | 項目1: `/admin/login?error` へリダイレクトされる |
| | 項目2: エラーメッセージが表示される |
| | 項目3: セッションが作成されない |
| **期待される結果** | 管理者ログイン画面にエラーメッセージが表示される |
| **実行結果** | ☐ OK / ☐ NG |

### AST-003: 一般ユーザーで管理者ログイン試行

| 項目 | 内容 |
|------|------|
| **テストID** | AST-003 |
| **シナリオ名** | 一般ユーザーで管理者ログイン試行 |
| **前提条件** | アプリケーション起動済み、ブラウザで http://localhost:8080/admin/login にアクセス |
| **テスト手順** | 1. ユーザー名: `testuser` (一般ユーザー), パスワード: `TestPass123!` を入力<br>2. 「管理者ログイン」ボタンをクリック |
| **確認項目** | 項目1: `/admin/login?error` へリダイレクトされる |
| | 項目2: エラーメッセージが表示される |
| | 項目3: 管理者画面にはアクセスできない |
| **期待される結果** | 一般ユーザーは管理者ログインに失敗する |
| **実行結果** | ☐ OK / ☐ NG |

### AST-004: 管理者在庫管理画面表示

| 項目 | 内容 |
|------|------|
| **テストID** | AST-004 |
| **シナリオ名** | 管理者在庫管理画面表示 |
| **前提条件** | 管理者 `adminuser` でログイン済み |
| **テスト手順** | 1. `/admin/inventory` にアクセス（またはナビゲーションバーの在庫管理をクリック） |
| **確認項目** | 項目1: HTTP 200で管理者用在庫管理画面が表示される |
| | 項目2: ページヘッダーに「在庫管理」と表示される |
| | 項目3: 在庫不足アラートが表示される |
| | 項目4: 商品テーブルに操作ボタン（在庫編集/履歴/削除/復元/詳細）が表示 |
| | 項目5: 「削除済み商品を含める」チェックボックスが表示され、機能する |
| **期待される結果** | 管理者用在庫管理画面が正常に表示される |
| **実行結果** | ☐ OK / ☐ NG |

### AST-005: 在庫編集機能

| 項目 | 内容 |
|------|------|
| **テストID** | AST-005 |
| **シナリオ名** | 在庫編集機能 |
| **前提条件** | 管理者 `adminuser` でログイン済み、管理者在庫管理画面を表示 |
| **テスト手順** | 1. 商品行の「在庫編集」ボタンをクリック<br>2. 在庫編集モーダルで「入庫」を選択<br>3. 数量「15」を入力<br>4. 備考「新入荷」を入力<br>5. 「更新」ボタンをクリック |
| **確認項目** | 項目1: 在庫編集モーダルが開く |
| | 項目2: 入庫・出庫・設定のラジオボタンが表示される |
| | 項目3: 更新後在庫数の予測が表示される |
| | 項目4: DBの在庫が更新されている |
| | 項目5: StockTransaction テーブルに履歴レコードが作成される |
| | 項目6: 備考が履歴に記録されている |
| | 項目7: 成功メッセージが表示される |
| | 項目8: 在庫一覧に反映された在庫数が表示される |
| **期待される結果** | 在庫が編集でき、DB変更と履歴記録が行われる |
| **実行結果** | ☐ OK / ☐ NG |

### AST-006: 在庫直接設定機能

| 項目 | 内容 |
|------|------|
| **テストID** | AST-006 |
| **シナリオ名** | 在庫直接設定機能 |
| **前提条件** | 管理者 `adminuser` でログイン済み、管理者在庫管理画面を表示 |
| **テスト手順** | 1. 商品行の「在庫編集」ボタンをクリック<br>2. ラジオボタン「設定」を選択<br>3. 数量「100」を入力<br>4. 「更新」ボタンをクリック |
| **確認項目** | 項目1: 「設定」ラジオボタンを選択すると、設定モードに切り替わる |
| | 項目2: 入力した数値「100」が新しい在庫数になる |
| | 項目3: 現在の在庫数から100への差分が履歴に記録される |
| | 項目4: DB在庫が「100」に更新されている |
| **期待される結果** | 在庫を指定値に直接設定できる |
| **実行結果** | ☐ OK / ☐ NG |

### AST-007: 商品管理画面表示

| 項目 | 内容 |
|------|------|
| **テストID** | AST-007 |
| **シナリオ名** | 商品管理画面表示 |
| **前提条件** | 管理者 `adminuser` でログイン済み |
| **テスト手順** | 1. ナビゲーションバーの「商品管理」をクリック |
| **確認項目** | 項目1: `/admin/products` ページが表示される |
| | 項目2: ページヘッダーに「商品管理」と表示される |
| | 項目3: 「新規商品登録」「在庫一覧へ」ボタンが表示される |
| | 項目4: 登録済み商品一覧テーブルが表示される |
| | 項目5: テーブルに商品ID/名/カテゴリ/価格/在庫数/ステータス/操作列が表示 |
| | 項目6: 管理者向け検索・フィルタパネルが表示される |
| | 項目7: ページネーションが表示される |
| **期待される結果** | 管理者用商品管理画面が正常に表示される |
| **実行結果** | ☐ OK / ☐ NG |

### AST-008: 商品新規登録

| 項目 | 内容 |
|------|------|
| **テストID** | AST-008 |
| **シナリオ名** | 商品新規登録 |
| **前提条件** | 管理者 `adminuser` でログイン済み、商品管理画面を表示 |
| **テスト手順** | 1. 「新規商品登録」ボタンをクリック<br>2. 商品新規登録フォームで以下を入力:<br>   - 商品名: `Test Laptop Pro`<br>   - カテゴリ: `Electronics`<br>   - 価格: `89900`<br>   - 初期在庫数: `50`<br>   - ステータス: `販売中(active)`<br>   - SKU: (空欄で自動生成)<br>3. 詳細情報を入力（任意）<br>4. 「登録する」ボタンをクリック |
| **確認項目** | 項目1: 商品新規登録画面が表示される |
| | 項目2: 必須項目(商品名等)に required 属性がある |
| | 項目3: 登録成功メッセージが表示される |
| | 項目4: 商品一覧にリダイレクトされる |
| | 項目5: DB Product テーブルに新規商品レコードが作成されている |
| | 項目6: SKU が自動生成されている |
| | 項目7: 初期在庫数 50 が StockTransaction に記録されている |
| **期待される結果** | 新規商品が正常に登録され、DBに保存される |
| **実行結果** | ☐ OK / ☐ NG |

### AST-009: 商品新規登録-バリデーション

| 項目 | 内容 |
|------|------|
| **テストID** | AST-009 |
| **シナリオ名** | 商品新規登録-バリデーション |
| **前提条件** | 管理者 `adminuser` でログイン済み、商品新規登録画面を表示 |
| **テスト手順** | **パターン1: 商品名未入力**<br>1. 商品名フィールドを空欄にして「登録する」をクリック<br><br>**パターン2: 価格未入力**<br>1. 商品名を入力、価格を空欄にして「登録する」をクリック<br><br>**パターン3: 価格が負の数**<br>1. 価格に「-100」を入力して「登録する」をクリック |
| **確認項目** | 項目1: パターン1でエラーメッセージ「商品名は必須です」表示 |
| | 項目2: パターン2でエラーメッセージ「価格は必須です」表示 |
| | 項目3: パターン3でエラーメッセージ「価格は0以上である必要があります」表示 |
| | 項目4: 登録されない |
| | 項目5: DVが残っている |
| **期待される結果** | バリデーションエラーが表示され、登録が中止される |
| **実行結果** | ☐ OK / ☐ NG |

### AST-010: 商品編集

| 項目 | 内容 |
|------|------|
| **テストID** | AST-010 |
| **シナリオ名** | 商品編集 |
| **前提条件** | 管理者 `adminuser` でログイン済み、商品管理画面を表示 |
| **テスト手順** | 1. 商品一覧から商品の「編集」ボタンをクリック(またはテーブル行をクリック)<br>2. 編集フォームで商品名を変更（例: 「Laptop Pro 15」 → 「Laptop Pro 17」）<br>3. 価格を変更（例: 89900 → 99900）<br>4. 「更新」ボタンをクリック |
| **確認項目** | 項目1: 編集フォームに現在の商品情報が表示される |
| | 項目2: 商品名・価格が編集可能 |
| | 項目3: 更新成功メッセージが表示される |
| | 項目4: 商品管理画面にリダイレクトされる |
| | 項目5: DB Product テーブルで商品情報が更新されている |
| | 項目6: 一覧に最新情報が反映されている |
| **期待される結果** | 商品情報が正常に編集され、DBに反映される |
| **実行結果** | ☐ OK / ☐ NG |

### AST-011: 商品削除

| 項目 | 内容 |
|------|------|
| **テストID** | AST-011 |
| **シナリオ名** | 商品削除 |
| **前提条件** | 管理者 `adminuser` でログイン済み、商品管理画面を表示 |
| **テスト手順** | 1. 商品一覧から削除対象商品の「削除」ボタンをクリック<br>2. 削除確認モーダルで「削除する」ボタンをクリック |
| **確認項目** | 項目1: 削除確認モーダルが表示される |
| | 項目2: 削除注意事項「論理削除となり、復元可能です」が表示 |
| | 項目3: 削除成功メッセージが表示される |
| | 項目4: DB Product テーブルで deleted_at が設定されている（論理削除） |
| | 項目5: 一覧から削除済み商品が非表示になる |
| | 項目6: 「削除済み商品を含める」チェックボックンを有効にすると復元できる状態で表示される |
| **期待される結果** | 商品が論理削除され、一覧から非表示になる |
| **実行結果** | ☐ OK / ☐ NG |

### AST-012: 商品復元

| 項目 | 内容 |
|------|------|
| **テストID** | AST-012 |
| **シナリオ名** | 商品復元 |
| **前提条件** | 管理者 `adminuser` でログイン済み、商品管理画面で削除済み商品を表示中 |
| **テスト手順** | 1. 「削除済み商品を含める」チェックボックスにチェックを入れる<br>2. 削除済み商品一覧から復元対象商品の「復元」ボタンをクリック |
| **確認項目** | 項目1: チェック有効で削除済み商品が一覧に表示される |
| | 項目2: 削除済み商品に「復元」ボタンが表示される |
| | 項目3: 復元成功メッセージが表示される |
| | 項目4: DB Product テーブルで deleted_at が NULL に戻される |
| | 項目5: 一覧に復元商品が表示される |
| **期待される結果** | 削除済み商品が復元される |
| **実行結果** | ☐ OK / ☐ NG |

### AST-013: ユーザー一覧表示

| 項目 | 内容 |
|------|------|
| **テストID** | AST-013 |
| **シナリオ名** | ユーザー一覧表示 |
| **前提条件** | 管理者 `adminuser` でログイン済み |
| **テスト手順** | 1. ナビゲーションバーの「ユーザー管理」ドロップダウンから「ユーザー一覧」をクリック |
| **確認項目** | 項目1: `/admin/users` ページが表示される |
| | 項目2: ページヘッダーに「ユーザー管理」と表示される |
| | 項目3: ユーザー一覧テーブルが表示される |
| | 項目4: テーブルにユーザーID/ユーザー名/メール/ロール/作成日/操作が表示 |
| | 項目5: キーワード検索（ユーザー名/メール）が機能する |
| | 項目6: ステータス(有効/無効)フィルタが機能する |
| | 項目7: ロール別フィルタが機能する |
| | 項目8: 並び順(作成日, ユーザー名など)が機能する |
| | 項目9: ページネーションが表示される |
| **期待される結果** | ユーザー一覧画面が正常に表示される |
| **実行結果** | ☐ OK / ☐ NG |

### AST-014: ユーザー新規作成

| 項目 | 内容 |
|------|------|
| **テストID** | AST-014 |
| **シナリオ名** | ユーザー新規作成 |
| **前提条件** | 管理者 `adminuser` でログイン済み、ユーザー一覧画面を表示 |
| **テスト手順** | 1. 「新規ユーザー作成」ボタンをクリック<br>2. ユーザー新規作成フォームで以下を入力:<br>   - ユーザー名: `newuser`<br>   - メール: `newuser@example.com`<br>   - パスワード: `NewUser123!`<br>   - パスワード確認: `NewUser123!`<br>   - ロール: `一般ユーザー`<br>3. 「作成」ボタンをクリック |
| **確認項目** | 項目1: ユーザー新規作成フォームが表示される |
| | 項目2: ユーザー名・メール・パスワード・ロール項目が入力可能 |
| | 項目3: 作成成功メッセージが表示される |
| | 項目4: ユーザー一覧にリダイレクトされる |
| | 項目5: DB User テーブルに新規ユーザーレコードが作成されている |
| | 項目6: 新規ユーザーでログインできる |
| **期待される結果** | 新規ユーザーが正常に作成され、DBに保存される |
| **実行結果** | ☐ OK / ☐ NG |

### AST-015: ユーザー新規作成-バリデーション

| 項目 | 内容 |
|------|------|
| **テストID** | AST-015 |
| **シナリオ名** | ユーザー新規作成-バリデーション |
| **前提条件** | 管理者 `adminuser` でログイン済み、ユーザー新規作成フォームを表示 |
| **テスト手順** | **パターン1: ユーザー名重複**<br>1. ユーザー名: `testuser` (既存)を入力して「作成」をクリック<br><br>**パターン2: メール形式不正**<br>1. メール: `invalid-email` を入力して「作成」をクリック<br><br>**パターン3: パスワード短すぎる**<br>1. パスワード: `Pass1` を入力して「作成」をクリック |
| **確認項目** | 項目1: パターン1でエラーメッセージ「ユーザー名が既に使用されています」表示 |
| | 項目2: パターン2でエラーメッセージ「メール形式が正しくありません」表示 |
| | 項目3: パターン3でエラーメッセージ「パスワードは8文字以上である必要があります」表示 |
| | 項目4: 作成されない |
| **期待される結果** | バリデーションエラーが表示され、作成が中止される |
| **実行結果** | ☐ OK / ☐ NG |

### AST-016: ユーザー編集

| 項目 | 内容 |
|------|------|
| **テストID** | AST-016 |
| **シナリオ名** | ユーザー編集 |
| **前提条件** | 管理者 `adminuser` でログイン済み、ユーザー一覧画面を表示 |
| **テスト手順** | 1. ユーザー一覧から対象ユーザーの「編集」ボタンをクリック<br>2. ユーザー編集フォームでメールアドレスを変更（例: `old@example.com` → `new@example.com`）<br>3. 「更新」ボタンをクリック |
| **確認項目** | 項目1: ユーザー編集フォームに現在情報が表示される |
| | 項目2: メールなど編集可能項目を変更できる |
| | 項目3: 更新成功メッセージが表示される |
| | 項目4: DB User テーブルでユーザー情報が更新されている |
| **期待される結果** | ユーザー情報が正常に編集され、DBに反映される |
| **実行結果** | ☐ OK / ☐ NG |

### AST-017: 管理者ログアウト

| 項目 | 内容 |
|------|------|
| **テストID** | AST-017 |
| **シナリオ名** | 管理者ログアウト |
| **前提条件** | 管理者 `adminuser` でログイン済み |
| **テスト手順** | 1. ナビゲーションバーの「ログアウト」ボタンをクリック |
| **確認項目** | 項目1: HTTP 302 リダイレクトが返される |
| | 項目2: `/login` にリダイレクトされる |
| | 項目3: セッションが削除される |
| | 項目4: 新規タブで `/admin/inventory` にアクセスするとログイン画面にリダイレクト |
| **期待される結果** | 管理者がシステムからログアウトし、ログイン画面に遷移する |
| **実行結果** | ☐ OK / ☐ NG |

### AST-018: 一般ユーザーの管理画面アクセス拒否

| 項目 | 内容 |
|------|------|
| **テストID** | AST-018 |
| **シナリオ名** | 一般ユーザーの管理画面アクセス拒否 |
| **前提条件** | 一般ユーザー `testuser` でログイン済み |
| **テスト手順** | 1. ブラウザの URL バーで直接 `http://localhost:8080/admin/inventory` を入力してアクセス |
| **確認項目** | 項目1: HTTP 403 Forbidden またはログイン画面へリダイレクト |
| | 項目2: 管理画面にはアクセスできない |
| | 項目3: エラーメッセージ「アクセス権限がありません」が表示される（または適切なリダイレクト） |
| **期待される結果** | 一般ユーザーは管理画面にアクセスできない |
| **実行結果** | ☐ OK / ☐ NG |

### AST-019: 管理者コンテキスト: 無効ユーザログイン不可

| 項目 | 内容 |
|------|------|
| **テストID** | AST-019 |
| **シナリオ名** | 管理者コンテキスト: 無効ユーザログイン不可 |
| **前提条件** | 管理者で対象ユーザを無効(disabled)に設定済み |
| **テスト手順** | 1. 管理者が `adminuser` で管理画面にログインし、対象ユーザを disabled に設定<br>2. 対象ユーザで `/login` にてログインを試行 |
| **確認項目** | 項目1: ログインエラーとなる（/login?error 等） |
| | 項目2: 管理画面にアクセスできない |
| **期待される結果** | 管理者により無効化されたユーザはログインできない |
| **実行結果** | ☐ OK / ☐ NG |

### AST-020: 管理者コンテキスト: 無効→有効でログイン成功

| 項目 | 内容 |
|------|------|
| **テストID** | AST-020 |
| **シナリオ名** | 管理者コンテキスト: 無効→有効でログイン成功 |
| **前提条件** | 対象ユーザが無効化されている状態 |
| **テスト手順** | 1. 管理者で管理画面にログインし、対象ユーザを有効化（enabled）に戻す<br>2. 対象ユーザで `/login` にてログインを試行 |
| **確認項目** | 項目1: HTTP 302 リダイレクトが返される |
| | 項目2: 適切な管理画面（または一般画面）に遷移する |
| **期待される結果** | 再有効化後、対象ユーザはログインできる |
| **実行結果** | ☐ OK / ☐ NG |

### AST-021: 在庫管理-履歴モーダル表示確認

| 項目 | 内容 |
|------|------|
| **テストID** | AST-021 |
| **シナリオ名** | 在庫管理-履歴モーダル表示確認 |
| **前提条件** | 管理者 `adminuser` で管理者在庫管理画面を表示 |
| **テスト手順** | 1. 在庫一覧の対象商品の「履歴」ボタンをクリック |
| **確認項目** | 項目1: 履歴モーダルが表示される |
| | 項目2: モーダル内に StockTransaction の履歴（日時・操作・数量・備考）が表示される |
| **期待される結果** | 履歴モーダルが正しく表示され、履歴内容が確認できる |
| **実行結果** | ☐ OK / ☐ NG |

### AST-022: 商品編集-ステータス変更で一覧非表示確認

| 項目 | 内容 |
|------|------|
| **テストID** | AST-022 |
| **シナリオ名** | 商品編集: ステータス変更で一覧非表示確認 |
| **前提条件** | 管理者で商品管理画面を表示 |
| **テスト手順** | 1. 任意商品を編集し、ステータスを「非表示」または「販売停止」に変更して保存<br>2. 商品一覧を再表示 |
| **確認項目** | 項目1: 編集後、一覧に表示されない（フィルタ条件による） |
| | 項目2: 「削除済み商品を含める」やフィルタで表示切替できることを確認 |
| **期待される結果** | ステータス変更が一覧表示に反映される |
| **実行結果** | ☐ OK / ☐ NG |

### AST-023: 在庫管理-復元ボタン挙動確認(削除チェック無し)

| 項目 | 内容 |
|------|------|
| **テストID** | AST-023 |
| **シナリオ名** | 在庫管理: 復元ボタン挙動確認(削除チェック無し) |
| **前提条件** | 管理者で管理者在庫管理画面を表示、対象商品は論理削除済みまたは通常一覧に存在 |
| **手順** | 1. 通常一覧で復元ボタンを押す（削除済み商品を含めるチェックを使わないパス） |
| **確認項目** | 項目1: 復元が行える場合は成功メッセージが表示され、一覧に反映される |
| **期待される結果** | 復元操作が期待通りに動作するか確認できる |
| **実行結果** | ☐ OK / ☐ NG |

### AST-024: 商品管理-検索クリア確認

| 項目 | 内容 |
|------|------|
| **テストID** | AST-024 |
| **シナリオ名** | 商品管理: 検索クリア確認 |
| **前提条件** | 管理者で商品管理画面を表示 |
| **手順** | 1. 検索条件を設定して検索後、「クリア」ボタンを押す |
| **確認項目** | 項目1: 全検索条件が初期化され、一覧が初期状態に戻る |
| **期待される結果** | 検索クリアが正しく動作する |
| **実行結果** | ☐ OK / ☐ NG |

### AST-025: ページ遷移確認(商品/在庫)

| 項目 | 内容 |
|------|------|
| **テストID** | AST-025 |
| **シナリオ名** | ページ遷移確認(商品/在庫) |
| **前提条件** | 管理者でログイン済み |
| **手順** | 1. 商品管理画面→在庫管理画面→商品詳細→商品管理へ戻る、等の遷移を行う |
| **確認項目** | 項目1: 各ページへの遷移が正しく行われる（HTTP 200/302 の確認） |
| **期待される結果** | 画面間の遷移が正しくできる |
| **実行結果** | ☐ OK / ☐ NG |

### AST-026: ユーザー一覧-キーワード/ステータス/ロール/並び順検索

| 項目 | 内容 |
|------|------|
| **テストID** | AST-026 |
| **シナリオ名** | ユーザー一覧: キーワード/ステータス/ロール/並び順検索 |
| **前提条件** | 管理者でユーザー一覧画面を表示 |
| **手順** | 1. キーワード検索でユーザ名を検索し結果を確認<br>2. ステータス(有効/無効)フィルタで絞る<br>3. ロール(ADMIN/USER)でフィルタを行う<br>4. 並び順(作成日/ユーザー名)でソートを行う |
| **確認項目** | 項目1: 各フィルタが正しく適用される |
| | 項目2: 並び順が反映される |
| **期待される結果** | ユーザー一覧の検索・並び替えが期待通りに機能する |
| **実行結果** | ☐ OK / ☐ NG |

### AST-027: ユーザー管理-検索クリア/削除(無効)/編集での再有効化確認

| 項目 | 内容 |
|------|------|
| **テストID** | AST-027 |
| **シナリオ名** | ユーザー管理: 検索クリア・削除/無効・編集での再有効化確認 |
| **前提条件** | 管理者でユーザー管理画面を表示 |
| **手順** | 1. 検索条件を設定しクリアで初期化されることを確認<br>2. 任意ユーザを削除（無効）にし一覧で無効となることを確認<br>3. 該当ユーザの編集画面から有効化し、一覧へ再表示されることを確認 |
| **確認項目** | 項目1: 検索クリアが動作する |
| | 項目2: 削除操作によりユーザが無効となる |
| | 項目3: 編集で有効化すると一覧へ戻り表示される |
| **期待される結果** | ユーザーの無効化→再有効化の一連動作が確認できる |
| **実行結果** | ☐ OK / ☐ NG |

---

## 6. エラーハンドリングシナリオ

### EST-001: エラー画面-管理者ユーザー

| 項目 | 内容 |
|------|------|
| **テストID** | EST-001 |
| **シナリオ名** | エラー画面-管理者ユーザー |
| **前提条件** | 管理者 `adminuser` でログイン済み、意図的にエラーを発生させる状況を作成（例：不正なパラメータでAPI呼び出し） |
| **テスト手順** | 1. ブラウザコンソール等で `/api/inventory/update` に不正なパラメータをPOST送信<br>2. または例外を発生させるシナリオを実行 |
| **確認項目** | 項目1: エラー画面が表示される |
| | 項目2: エラー画面に「ホームへ」ボタンがある |
| | 項目3: 「ホームへ」ボタンから `/admin/login` へリダイレクトされる（管理者用） |
| | 項目4: エラーコード・エラーメッセージが表示される（適切に） |
| **期待される結果** | 管理者ユーザーはエラー画面から `/admin/login` へ遷移できる |
| **実行結果** | ☐ OK / ☐ NG |

### EST-002: エラー画面-一般ユーザー

| 項目 | 内容 |
|------|------|
| **テストID** | EST-002 |
| **シナリオ名** | エラー画面-一般ユーザー |
| **前提条件** | 一般ユーザー `testuser` でログイン済み、意図的にエラーを発生させる状況を作成 |
| **テスト手順** | 1. ブラウザコンソール等で例外を発生させるシナリオを実行 |
| **確認項目** | 項目1: エラー画面が表示される |
| | 項目2: エラー画面に「ホームへ」ボタンがある |
| | 項目3: 「ホームへ」ボタンから `/login` へリダイレクトされる（一般ユーザー用） |
| | 項目4: 管理者ログイン画面へはリダイレクトされない |
| **期待される結果** | 一般ユーザーはエラー画面から `/login` へ遷移できる |
| **実行結果** | ☐ OK / ☐ NG |

### EST-003: エラー画面-レイアウト

| 項目 | 内容 |
|------|------|
| **テストID** | EST-003 |
| **シナリオ名** | エラー画面-レイアウト |
| **前提条件** | エラーが発生して、エラー画面が表示された状態 |
| **テスト手順** | 1. エラー画面のHTMLをブラウザで確認 |
| **確認項目** | 項目1: エラー画面に基本的なHTMLレイアウトがある |
| | 項目2: ナビゲーションバーが表示されている（簡易版またはなし） |
| | 項目3: エラーメッセージが読みやすく表示されている |
| | 項目4: 「ホームへ」ボタンが目立つ場所に配置されている |
| | 項目5: CSSが正常に適用されている（Bootstrap スタイルが有効） |
| | 項目6: レスポンシブデザインが機能している（モバイル対応） |
| **期待される結果** | エラー画面が正常なHTMLレイアウトで表示される |
| **実行結果** | ☐ OK / ☐ NG |

---

## テスト実行結果記録

| シナリオID | シナリオ名 | 実行日 | 実行者 | 結果 | 備考 |
|-----------|---------|------|------|------|------|
| UST-001 | ユーザーログイン成功 | | | ☐ OK / ☐ NG | |
| UST-002 | ユーザーログイン失敗-パスワード誤り | | | ☐ OK / ☐ NG | |
| UST-003 | ユーザーログイン失敗-ユーザー存在しない | | | ☐ OK / ☐ NG | |
| UST-004 | 在庫管理画面表示 | | | ☐ OK / ☐ NG | |
| UST-005 | 在庫検索・フィルタリング | | | ☐ OK / ☐ NG | |
| UST-006 | 在庫詳細表示 | | | ☐ OK / ☐ NG | |
| UST-007 | 在庫入出庫操作 | | | ☐ OK / ☐ NG | |
| UST-008 | パスワード変更成功 | | | ☐ OK / ☐ NG | |
| UST-009 | パスワード変更失敗-現在のパスワード誤り | | | ☐ OK / ☐ NG | |
| UST-010 | パスワード変更失敗-バリデーション | | | ☐ OK / ☐ NG | |
| UST-011 | ユーザーログアウト | | | ☐ OK / ☐ NG | |
| UST-012 | アクセス拒否-エラー403 | | | ☐ OK / ☐ NG | |
| UST-013 | ページ不在-エラー404 | | | ☐ OK / ☐ NG | |

（続きは AST-*, EST-* も同様に記録）

---

## 附録

### A. テスト環境チェックリスト

- ☐ Maven インストール済み
- ☐ JDK 21 インストール済み
- ☐ MySQL 8.0 起動済み
- ☐ 任意のブラウザインストール済み
- ☐ アプリケーション起動スクリプト準備済み
- ☐ テストユーザー作成済み（testuser, adminuser）

### B. トラブルシューティング

| 問題 | 対処方法 |
|------|---------|
| ログイン画面が表示されない | アプリケーションが起動しているか確認。http://localhost:8080/login にアクセス |
| DB接続エラー | MySQL が起動しているか、接続情報を確認 |
| セッションエラー | ブラウザのクッキーをクリア |
| CSRF エラー | CSRF トークンが付与されているか確認 |

