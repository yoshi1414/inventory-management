# 実装状況チェックリスト

**確認日**: 2026年2月22日  
**対象設計書**: 在庫管理画面設計書 / 管理者用在庫管理画面設計書 / 商品管理画面設計書 / 商品詳細画面設計書 / 商品新規登録画面設計書

---

## 凡例
- ✅ 実装済み
- ❌ 未実装
- ⚠️ 部分実装・設計書との差異あり

---

## 1. 一般ユーザー用 在庫管理画面（URL: /inventory）

**Controller**: `InventoryController.java`  
**Template**: `inventory.html`

| No | 機能・UI要素 | 状態 | 備考 |
|----|-------------|------|------|
| 1 | ナビゲーションバー（システム名） | ✅ 実装済み | `/inventory`リンク・アイコン付き |
| 2 | ナビゲーションバー（パスワード変更） | ✅ 実装済み | `/users/password`へリンク |
| 3 | ナビゲーションバー（ログアウト） | ✅ 実装済み | `/logout`へPOST |
| 4 | 在庫不足アラート（20個以下の件数表示） | ✅ 実装済み | `lowStockCount`を表示 |
| 5 | 在庫不足アラート（0個の件数表示） | ✅ 実装済み | `outOfStockCount`を表示 |
| 6 | 検索（キーワード・商品名） | ✅ 実装済み | 部分一致検索 |
| 7 | フィルタ（カテゴリ） | ✅ 実装済み | Electronics/Clothing/Home Appliances |
| 8 | フィルタ（ステータス） | ✅ 実装済み | active/inactive |
| 9 | フィルタ（在庫状態） | ✅ 実装済み | sufficient/low/out |
| 10 | 並び順 | ✅ 実装済み | 商品名/在庫数/更新日 |
| 11 | 商品一覧テーブル（商品コード） | ✅ 実装済み | `<code>`タグで表示 |
| 12 | 商品一覧テーブル（商品名・カテゴリ・価格・在庫数・ステータス・更新日） | ✅ 実装済み | |
| 13 | 商品一覧テーブル（詳細ボタン） | ✅ 実装済み | `/inventory/products/{id}` |
| 14 | 在庫数の色分け（0個・1-20個 = 警告色リンク） | ⚠️ 部分実装 | リンクにはなっているが`stock-danger`/`stock-warning`クラス未適用で色分けなし |
| 15 | 在庫数の色分け（21個以上 = 通常テキスト） | ⚠️ 部分実装 | 21個以上も`<a>`タグリンクになっており、テキスト表示になっていない |
| 16 | テーブル行クリック（`product-row`クラス） | ✅ 実装済み | `class="product-row clickable-row"` |
| 17 | ページネーション（最初/前/番号/次/最後） | ✅ 実装済み | 省略記号（...）付きスマートページネーション |
| 18 | ページ情報テキスト（全N件中 X-Y件を表示） | ✅ 実装済み | |
| 19 | 入庫・出庫モーダル（入庫/出庫 ラジオボタン） | ✅ 実装済み | デフォルト：入庫選択済み |
| 20 | 入庫・出庫モーダル（在庫数入力） | ✅ 実装済み | |
| 21 | 入庫・出庫モーダル（更新ボタン） | ✅ 実装済み | |
| 22 | 入庫・出庫モーダル（閉じるボタン） | ✅ 実装済み | |

---

## 2. 管理者用 在庫管理画面（URL: /admin/inventory）

**Controller**: `AdminInventoryController.java`  
**Template**: `admin/inventory.html`

| No | 機能・UI要素 | 状態 | 備考 |
|----|-------------|------|------|
| 1 | ナビゲーションバー（システム名＋管理者バッジ） | ✅ 実装済み | |
| 2 | ナビゲーションバー（在庫/商品/ユーザー管理リンク） | ✅ 実装済み | ユーザー管理はドロップダウン |
| 3 | ナビゲーションバー（ログアウト） | ✅ 実装済み | |
| 4 | 在庫不足アラート | ✅ 実装済み | |
| 5 | 検索・フィルタ（キーワード/カテゴリ/ステータス/在庫状態） | ✅ 実装済み | |
| 6 | 並び順 | ✅ 実装済み | 在庫降順(`stock_desc`)オプション追加 |
| 7 | 削除済み商品を含めるフィルタ | ✅ 実装済み | 管理者専用機能 |
| 8 | 商品一覧テーブル（全列） | ✅ 実装済み | |
| 9 | 在庫数色分け（0/1-20/21以上） | ✅ 実装済み | `stock-danger`/`stock-warning`/`stock-ok`＋アイコン |
| 10 | 操作ボタン（在庫編集/履歴/削除/復元/詳細） | ✅ 実装済み | |
| 11 | ページネーション | ✅ 実装済み | |
| 12 | 削除確認モーダル | ✅ 実装済み | 商品名・商品ID表示 |
| 13 | 在庫編集モーダル（入庫/出庫） | ✅ 実装済み | 備考欄・更新後在庫数予測付き |
| 14 | 在庫履歴モーダル | ✅ 実装済み | 日時/種別/数量/変更前後/実行者/備考 |

---

## 3. 管理者用 商品管理画面（URL: /admin/products）

**Controller**: `AdminProductController.java`  
**Template**: `admin/products.html`

| No | 機能・UI要素 | 状態 | 備考 |
|----|-------------|------|------|
| 1 | ナビゲーションバー | ✅ 実装済み | |
| 2 | ページヘッダー（新規商品登録ボタン） | ✅ 実装済み | `/admin/products/create`へ遷移 |
| 3 | ページヘッダー（在庫一覧へボタン） | ✅ 実装済み | `/admin/inventory`へ遷移 |
| 4 | 説明パネル（`alert-info`） | ✅ 実装済み | |
| 5 | 検索（商品名・商品コード） | ✅ 実装済み | |
| 6 | フィルタ（カテゴリ・ステータス） | ✅ 実装済み | カテゴリはDBから動的取得 |
| 7 | 並び順 | ✅ 実装済み | 7種対応 |
| 8 | **CSV一括登録ボタン（`/admin/products/import`）** | ❌ 未実装 | エンドポイントはスタブあり、HTMLにボタンが存在しない |
| 9 | **CSVエクスポートボタン（`/admin/products/export`）** | ❌ 未実装 | エンドポイントはスタブあり、HTMLにボタンが存在しない |
| 10 | 商品一覧テーブル（全列） | ✅ 実装済み | |
| 11 | 在庫数の色分け（0=赤/1-20=黄/21以上=緑） | ✅ 実装済み | `stock-danger`/`stock-warning`/`stock-ok` |
| 12 | 操作ボタン（編集） | ✅ 実装済み | `/admin/products/{id}/edit`へ遷移 |
| 13 | 操作ボタン（削除） | ⚠️ 部分実装 | `product-delete-trigger`クラスベース処理。設計書の`handleDelete(商品ID)`関数名とは異なるが機能は同等 |
| 14 | ページネーション | ✅ 実装済み | |
| 15 | 商品情報入力フォーム（商品名/カテゴリ/価格/在庫数/ステータス） | ✅ 実装済み | クイック登録フォームとして実装 |
| 16 | **商品情報入力フォーム（説明フィールド）** | ❌ 未実装 | 設計書に「説明」項目があるが、クイック登録フォームに説明フィールドなし |
| 17 | 削除確認モーダル（確認メッセージ・注意事項） | ✅ 実装済み | 論理削除の注意事項あり |
| 18 | **削除確認モーダル（商品ID表示）** | ❌ 未実装 | 設計書「商品ID: {商品ID}」表示に対し、実装は商品名のみ |
| 19 | 削除確認モーダル（キャンセル/削除するボタン） | ✅ 実装済み | |

---

## 4. 管理者用 商品詳細画面（URL: /admin/inventory/products/{id}）

**Controller**: `AdminInventoryController.java`  
**Template**: `admin/inventory-detail.html`

> **注意**: `admin/product-detail.html`も存在するが、どのコントローラーからも参照されていない未接続ファイル

| No | 機能・UI要素 | 状態 | 備考 |
|----|-------------|------|------|
| 1 | ナビゲーションバー | ✅ 実装済み | |
| 2 | パンくずリスト（親画面 > 商品詳細） | ✅ 実装済み | `parentLabel`/`parentUrl`で動的切替 |
| 3 | **パンくずリスト（「ホーム」の1階層目）** | ❌ 未実装 | 設計書「ホーム > 商品管理 > 商品詳細」だが、実装は2階層のみ |
| 4 | ページヘッダー（編集ボタン） | ⚠️ 部分実装 | URLが`/admin/products/{productCode}/edit`（コード使用）。Controllerのエンドポイントは`/{id}/edit`（Integer ID）で**URLの不整合**あり |
| 5 | ページヘッダー（削除ボタン） | ⚠️ 部分実装 | モーダル表示は動作するが、`confirmDelete()`がJS `alert()`後にリダイレクトするのみで**実際のAPI削除処理が未実装** |
| 6 | 商品基本情報カード（商品コード/商品名/カテゴリ/SKU/商品説明） | ✅ 実装済み | |
| 7 | 商品基本情報カード（価格/在庫数/ステータス） | ✅ 実装済み | 在庫数は3段階色分けあり |
| 8 | 商品基本情報カード（商品評価・星表示） | ✅ 実装済み | 塗りつぶし/半星/空星の3種対応 |
| 9 | 商品詳細情報カード（保証期間/寸法/バリエーション/製造日/有効期限/タグ） | ✅ 実装済み | タグはカンマ分割バッジ表示 |
| 10 | 入出庫履歴カード（日時/種別/数量/在庫数/担当者/備考） | ✅ 実装済み | |
| 11 | **入出庫履歴（「変更前在庫数」列）** | ❌ 未実装 | 設計書に記載あるが実装はなし |
| 12 | **入出庫履歴（最新3件表示）** | ⚠️ 差異 | 設計書「最新3件」に対し、実装は最新**10件** |
| 13 | **「すべての履歴を表示」ボタン** | ❌ 未実装 | 設計書に記載のボタンが存在しない |
| 14 | 「商品管理に戻る」ボタン | ✅ 実装済み | `from`パラメータで動的に遷移先を切替 |
| 15 | 削除確認モーダル（確認メッセージ・注意事項） | ✅ 実装済み | |
| 16 | 削除確認モーダル（商品コード表示） | ⚠️ 部分実装 | `<span>`タグで表示。設計書は`<code>`タグ指定 |
| 17 | 削除確認モーダル（キャンセル/削除するボタン） | ✅ 実装済み | |
| 18 | **削除確認モーダル（実際のAPI削除実行）** | ❌ 未実装 | JSが`alert()`後にリダイレクトするのみ。削除APIへのリクエストなし |

---

## 5. 管理者用 商品新規登録画面（URL: /admin/products/create）

**Controller**: `AdminProductController.java`  
**Template**: `admin/product-create.html`

| No | 機能・UI要素 | 状態 | 備考 |
|----|-------------|------|------|
| 1 | ナビゲーションバー | ✅ 実装済み | |
| 2 | パンくずリスト（商品管理 > 商品新規登録） | ✅ 実装済み | |
| 3 | **パンくずリスト（「ホーム」の1階層目）** | ❌ 未実装 | 設計書「ホーム > 商品管理 > 商品新規登録」に対し、実装は2階層のみ |
| 4 | ページヘッダー（「商品新規登録」） | ✅ 実装済み | |
| 5 | 基本情報カード（商品名） | ✅ 実装済み | バリデーションメッセージ付き |
| 6 | 基本情報カード（カテゴリ） | ✅ 実装済み | |
| 7 | 基本情報カード（SKU） | ✅ 実装済み | 任意・空欄で自動生成 |
| 8 | 基本情報カード（価格・初期在庫数） | ✅ 実装済み | 必須・`min="0"` |
| 9 | 基本情報カード（ステータス） | ✅ 実装済み | デフォルト：販売中 |
| 10 | **基本情報カード（商品説明）** | ⚠️ 差異 | 設計書では基本情報カード内に配置されているが、実装では詳細情報カードに移動 |
| 11 | 詳細情報カード（保証期間/寸法/バリエーション/製造日/有効期限/タグ） | ✅ 実装済み | |
| 12 | フォームアクション（登録ボタン） | ✅ 実装済み | POST `/admin/products/create` |
| 13 | フォームアクション（クリアボタン） | ✅ 実装済み | `type="reset"` |
| 14 | **フォームアクション（「キャンセル」ボタン名称）** | ⚠️ 差異 | 設計書「キャンセル」に対し、実装は「商品管理へ戻る」。機能は同等（`/admin/products`へ遷移） |

---

## 未実装一覧サマリー

### ❌ 完全未実装（機能が存在しない）

| No | 画面 | 未実装機能 |
|----|------|-----------|
| 1 | 商品管理画面 | CSV一括登録ボタン（エンドポイントはスタブあり） |
| 2 | 商品管理画面 | CSVエクスポートボタン（エンドポイントはスタブあり） |
| 3 | 商品管理画面 | 削除確認モーダルの商品ID表示 |
| 4 | 商品管理画面 | クイック登録フォームの「説明」フィールド |
| 5 | 商品詳細画面 | 削除ボタンの実際のAPI削除処理 |
| 6 | 商品詳細画面 | 「すべての履歴を表示」ボタン |
| 7 | 商品詳細画面 | 入出庫履歴の「変更前在庫数」列 |
| 8 | 商品詳細画面 | パンくずリストの「ホーム」（1階層目） |
| 9 | 商品新規登録画面 | パンくずリストの「ホーム」（1階層目） |

### ⚠️ 部分実装・設計書との差異

| No | 画面 | 差異内容 |
|----|------|---------|
| 1 | 在庫管理画面（一般） | 在庫数の色分け：0個・1-20個に`stock-danger`/`stock-warning`クラス未適用 |
| 2 | 在庫管理画面（一般） | 在庫数21個以上がテキストではなく`<a>`リンクのまま |
| 3 | 商品管理画面 | 削除ボタンのJS関数名：`handleDelete(商品ID)`ではなく`product-delete-trigger`クラスベース |
| 4 | 商品詳細画面 | 編集ボタンURL不整合：テンプレートは`productCode`使用、Controllerは`Integer ID`使用 |
| 5 | 商品詳細画面 | 削除確認モーダルの商品コードが`<span>`（設計書は`<code>`タグ） |
| 6 | 商品詳細画面 | 入出庫履歴が最新10件（設計書は3件） |
| 7 | 商品新規登録画面 | 「商品説明」が詳細情報カードに配置（設計書は基本情報カード） |
| 8 | 商品新規登録画面 | キャンセルボタンの名称が「商品管理へ戻る」（設計書は「キャンセル」） |

---

## 設計書を超えて実装された追加機能

| No | 画面 | 追加機能 |
|----|------|---------|
| 1 | 管理者用在庫管理画面 | 在庫編集モーダルに「在庫数設定（set）」操作 |
| 2 | 管理者用在庫管理画面 | 在庫編集モーダルに備考欄・更新後在庫数予測表示 |
| 3 | 管理者用在庫/商品管理画面 | 削除済み商品の復元機能 |
| 4 | 管理者用在庫/商品管理画面 | 「削除済み商品を含める」フィルタ |
| 5 | 商品詳細画面 | `from`パラメータによる動的な「戻る先」切替 |
